import { Steps, Step } from '@docusaurus/theme-common';

# Aqara 设备接入

Aqara Studio 支持两种 Aqara 设备接入方式，具体选择依据其是否搭载于 Aqara 网关：
- 是：请参阅 [通过 Aqara Cloud 接入](#通过-aqara-cloud-接入)。
- 否：请参阅 [通过五元组信息接入](#通过五元组信息接入)。

## 通过 Aqara Cloud 接入

## 通过五元组信息接入

### 前提条件

在开始通过五元组信息添加 Aqara 设备之前，请确保您拥有任意 Aqara 网关设备。

### 导入五元组

<Steps>
  <Step>
    请先将所有 Aqara 设备退出网络。
  </Step>
  <Step>
    在首页点击进入**通信**页面。
  </Step>
  <Step>
    在侧边栏双击 **Aqara** 文件夹，进入 Aqara 协议管理界面。
  </Step>
  <Step>
    切换到 **导入五元组** 标签页。
  </Step>
  <Step>
    向 Aqara 技术支持申请五元组信息 Excel 文件。
  </Step>
  <Step>
    上传五元组 Excel 文件，Aqara Studio 会自动解析文件内容，等待设备入网。
  </Step>
</Steps>

### 添加设备

<Steps>
  <Step>
    联系 Aqara 技术支持，获取并安装 Aqara Studio Tool App（目前仅支持 Android）。
  </Step>
  <Step>
    启动 App，填写所需的网络登录信息：
    <ul>
      <li><strong>BaseUrl</strong>：Aqara Studio 的访问地址。</li>
      <li><strong>FastLinkUrl</strong>：Aqara Studio 所在设备的 IP 或域名，详情请查看 <a href="#如何获取-fastlinkurl">如何获取 FastLinkUrl</a>。</li>
    </ul>
  </Step>
  <Step>
    登录成功后，选择“网关入口”，并根据页面提示添加 Aqara 网关。
  </Step>
  <Step>
    网关添加完成后，连续按下该网关按钮 3 次，进入子设备入网模式。<br />
    :::tip
    如需了解各设备入网流程，请参考设备说明书或在 Aqara Home App 查询。
    :::
  </Step>
  <Step>
    待子设备入网成功后，设备信息会自动显示在右侧侧边栏的 <code>Aqara</code> 目录中，无需手动添加测点，Aqara Studio 会自动识别。
  </Step>
</Steps>

#### 如何获取 FastLinkUrl

1. 双击 Aqara 文件夹，进入 **配置** 标签页，展开 **基础配置**。
2. 查看`Name Srv Address`是否为空：
   - 是：**基础配置** 下的 `Ip Address` 为 FastLinkUrl。
   - 否：该地址为为 FastLinkUrl。
 
### 设备控制（待更新）
1. 在左侧导航栏，依次双击展开CoapNetwork文件夹-选择任一设备-Points文件夹；
2. 双击选择任一需要控制的资源点值，在BASIC页面，Out为输出，即资源当前值，可读，In为输入，即控制值，可写；
3. 以开关为例，1为打开，0为关闭。修改任一In值为1，保存后将执行打开操作，执行成功，则Out值为1。In值有优先级之分，In1-In16，其中In1优先级最高，In16最低。In1写值成功，其他In值输入不生效。

