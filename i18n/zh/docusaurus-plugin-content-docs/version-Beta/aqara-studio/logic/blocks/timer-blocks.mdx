# 时间

## 布尔延迟

#### 功能概述

**布尔延迟**逻辑块可针对布尔值（`true` / `false`）的状态变化进行延时处理。当输入端的布尔状态发生变化时，输出端会在设定的延迟时间后才同步变化，延迟时间可根据输入状态分别进行设置（即输入为 `true` 和输入为 `false` 时可配置不同的等待时长）。

此逻辑块不会改变原始数据，只是延缓状态变化的输出，用于实现防抖、延迟触发，或判断条件需持续为真或假达到指定时间后才执行后续逻辑。

通过“输入为 true 时延迟”和“输入为 false 时延迟”两个参数（可直接数值设定，也可外接数值型输入），可以灵活满足多种持续触发与延迟响应场景的需求。

#### 数据类型

- **输入 / 输出：** 在逻辑块中配置
    - **输入：** 在左侧连接布尔型数据。
    - **输出：** 在右侧连接可存储布尔类型数据的节点。
- **输入为 true 时延迟 / 输入为 false 时延迟：** 双击逻辑块进入设置面板，根据需求分别配置延迟时长。
    - **输入为 true 时延迟：** 设置输入为 true 时的等待时长（数值型，可直接填写，也可连接数值型输入）。
    - **输入为 false 时延迟：** 设置输入为 false 时的等待时长（数值型，同上）。

#### 示例

以“有人进入房间时延迟开灯、无人后延迟关灯”为例，步骤如下：

1. 在画布左侧区域添加“人体传感器 - 存在状态”（布尔型）作为**输入点**。
2. 在画布中部添加一个**布尔延迟**逻辑块。
3. 将“人体传感器 - 存在状态”的**输出**连接到**布尔延迟**块的**输入**端。
4. 配置**输入为 true 时延迟**为 2 秒，表示检测到有人时，延迟 2 秒才输出 true。
5. 配置**输入为 false 时延迟**为 10 秒，表示检测到无人时，延迟 10 秒才输出 false。
6. 在画布右侧添加“灯 - 开关状态”作为**输出点**。
7. 将**布尔延迟**逻辑块的**输出**连接到“灯 - 开关状态”输入端。

通过上述配置，可以实现：检测到有人后延迟 2 秒亮灯，检测到无人后延迟 10 秒关灯，有效防止误触发，实现更智能的灯光控制。

## 延迟时间

#### 功能概述

当您希望在前一个行为完成后，延迟一段时间再触发下一个行为时，可用此逻辑块将两者连接，实现延时效果。

#### 如何使用

1. 在画布中添加**延迟时间**逻辑块。
2. 将需要延迟处理的操作连接到该逻辑块的`触发`输入端。
3. 双击逻辑块，在`时间`参数中设置所需的延迟时长。
4. 在`输入`处填写或连接延迟后希望传递的数据（可为数值、字符串等）。
5. 将`延迟事件`输出端连接到后续需接收该数据的节点，实现延时触发。

#### 示例

以“门窗打开后延迟 3 秒关闭空调”为例，步骤如下：

1. 在画布左侧添加“门窗传感器 - 开关状态功能点。
2. 添加一个**延迟时间**逻辑块。
3. 将“门窗传感器 - 开关状态”的`输出`连接到该逻辑块的`触发`输入端。
4. 双击该逻辑块，设置延迟时间为 `3` 秒，设置`输入`处填写空调关机数值（如 `false`）。
5. 在画布右侧添加“空调 - 开关状态”功能点。
6. 将“延迟时间”逻辑块的`延迟事件`输出端连接到“空调 - 开关状态”的`输入`。

这样，当门窗被打开时，系统将在等待 3 秒后关闭空调，实现防止冷能浪费的自动化逻辑。

## 定时触发

#### 功能概述

**定时触发**逻辑块用于在设定的日期和时间条件下自动触发指定的动作。您可以灵活配置一周中的生效天数、每天的具体触发时间，实现定时开启/关闭设备等自动化需求。

#### 数据类型

- **天**：在此处设置在周几（可多选）生效。
- **时间**：在此设置生效的确切时间。
- **触发**：右侧连接待触发的动作。

#### 示例

以“每天早上 8:00 自动开启窗帘”为例，步骤如下：

1. 在画布中添加一个**定时触发**逻辑块。
2. 设置`天`为每周一到周日（全选），设置`时间`为 `08:00`。
3. 在画布右侧添加“窗帘 - 开关状态”作为待执行设备节点。
4. 将“定时触发”逻辑块的`触发`输出端连接到“窗帘 - 开关状态”的`输入`端。
5. 双击连线，打开配置面板，编辑 `Converter > Target` 的 `Value`，在弹窗中打开 toggle 开关吗，并确保没有选中任何 Status。这样，系统将会在每天早上 8 点自动打开窗帘.

## 时间范围

#### 功能概述

使用此逻辑块，可以根据设定的“周几”、“开始时间”和“结束时间”等条件，在指定的时间范围内判断是否允许某个行为发生。当时间处于设定范围时，会触发“满足”分支的后续动作；否则，触发“不满足”分支的动作。

#### 数据类型

- **卡片上直接显示的属性：**
    - **满足**：连接时间落在指定范围内时需触发的操作。
    - **触发**：左侧用于触发时间范围判断的输入动作。
- **配置面板中可设置的属性：**
    - **天**：选择一周中哪些天生效（可多选）。
    - **开始时间**：设置时间段起始（如 09:00）。
    - **结束时间**：设置时间段结束（如 18:00）。
    - **不满足**：（可选）连接时间不在范围内时需触发的操作。

#### 示例

以“在工作时间内开启会议室灯光”为例，步骤如下：

1. 在画布左侧添加一个“灯 - 开关状态”节点，作为开启灯光的触发动作。
2. 添加一个**时间范围**逻辑块。
3. 双击该逻辑块，设置`天`为每周一到周五，设置`开始时间`为 `09:00`，`结束时间`为 `18:00`，表示仅在工作日的上午 9 点至下午 6 点范围内生效。
4. 将“灯 - 开关状态”的`输出`连接到“时间范围”逻辑块的`触发`端口。
5. 在“满足”分支下连接“灯 - 开关状态”功能点的`输入`。
6. 